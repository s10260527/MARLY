<!DOCTYPE html>
<html>
<head>
    <title>Resource Usage Over Time</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 20px 0;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .card-title {
            font-size: 1.2em;
            color: #000000;
            margin-bottom: 15px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <h3 class="card-title">Resource Usage Trends</h3>
        <canvas id="resourceChart"></canvas>
    </div>

    <script>
        // Function to generate random data
        function generateData(months, baseValue, variance) {
            return months.map(() => baseValue + (Math.random() - 0.5) * variance);
        }

        // Get last 12 months
        function getLast12Months() {
            const months = [];
            const currentDate = new Date();
            for (let i = 11; i >= 0; i--) {
                const date = new Date(currentDate.getFullYear(), currentDate.getMonth() - i, 1);
                months.push(date.toLocaleString('default', { month: 'short', year: '2-digit' }));
            }
            return months;
        }

        // Initialize Chart
        function initChart() {
            const ctx = document.getElementById('resourceChart').getContext('2d');
            const months = getLast12Months();

            // Generate sample data
            const carbonData = generateData(months, 500, 200);
            const energyData = generateData(months, 200000, 50000);
            const costData = generateData(months, 1000000, 200000);

            // Create chart
            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Carbon Emissions (tonnes)',
                            data: carbonData,
                            borderColor: '#16b65b',  // Using primary-600
                            backgroundColor: 'rgba(22, 182, 91, 0.1)',
                            yAxisID: 'y-carbon',
                            tension: 0.4,
                            fill: true,
                            borderWidth: 2.5
                        },
                        {
                            label: 'Energy Consumption (kWh)',
                            data: energyData,
                            borderColor: '#0c45c0',  // Using secondary-600
                            backgroundColor: 'rgba(12, 69, 192, 0.1)',
                            yAxisID: 'y-energy',
                            tension: 0.4,
                            fill: true,
                            borderWidth: 2.5
                        },
                        {
                            label: 'Operational Costs ($)',
                            data: costData,
                            borderColor: '#7d70f5',  // Using accent-300
                            backgroundColor: 'rgba(125, 112, 245, 0.1)',
                            yAxisID: 'y-cost',
                            tension: 0.4,
                            fill: true,
                            borderWidth: 2.5
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        title: {
                            display: false
                        },
                        legend: {
                            display: true,
                            onClick: null, // Disable legend click events
                            labels: {
                                color: '#000000',
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12,
                                    weight: '500'
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        if (context.datasetIndex === 0) {
                                            label += context.parsed.y.toFixed(2) + ' tonnes';
                                        } else if (context.datasetIndex === 1) {
                                            label += context.parsed.y.toFixed(2) + ' kWh';
                                        } else {
                                            label += '$' + context.parsed.y.toLocaleString();
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                            },
                            ticks: {
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            }
                        },
                        'y-carbon': {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Carbon Emissions (tonnes)',
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            ticks: {
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        'y-energy': {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Energy Consumption (kWh)',
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            ticks: {
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            grid: {
                                drawOnChartArea: false,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        'y-cost': {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Operational Costs ($)',
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            ticks: {
                                color: '#000000',
                                font: {
                                    weight: '500'
                                }
                            },
                            grid: {
                                drawOnChartArea: false,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });
        }

        // Initialize when document is loaded
        document.addEventListener('DOMContentLoaded', initChart);
    </script>
</body>
</html>